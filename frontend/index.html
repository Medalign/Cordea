<!doctype html><html lang="en"><head>
  <meta charset="utf-8" />
  <title>ECG Assist — GuardRail & TrendView</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./styles.css" /></head><body>
  <header class="topbar">
    <div class="brand">
      <h1>ECG Assist</h1>
      <p class="subtitle">Clinician demo tools for GuardRail and TrendView</p>
    </div>
    <div class="api-box">
      <span id="health-chip" class="chip chip--muted"></span>
      <button id="health-retry" class="btn btn--pill">Retry</button>
      <div class="api-base">
        <label>API base</label>
        <code id="api-base-pill"></code>
        <input id="api-base-input" type="text" value="http://127.0.0.1:8000" />
      </div>
    </div>
  </header>

  <main class="container">
    <!-- GuardRail -->
    <section class="card">
      <div class="section-head">
        <h2>GuardRail — Encounter review</h2>
        <div class="section-actions">
          <button id="guardrail-demo-adult" class="btn btn--ghost">Load Adult Demo</button>
          <button id="guardrail-demo-paeds" class="btn btn--ghost">Load Paediatric Demo</button>
        </div>
      </div>

      <form id="guardrail-form" class="grid grid--two">
        <label class="field">
          <span>Age band</span>
          <select name="age_band">
            <option>Adult 65+</option>
            <option>Adult 18–64</option>
            <option>Child 10–12 yrs</option>
          </select>
        </label>
        <label class="field">
          <span>Sex</span>
          <select name="sex">
            <option value="male">Male</option>
            <option value="female">Female</option>
          </select>
        </label>
        <label class="field">
          <span>Heart rate (bpm) <em class="hint">55–100</em></span>
          <input name="heart_rate" type="number" inputmode="numeric" />
        </label>
        <label class="field">
          <span>PR interval (ms) <em class="hint">120–210</em></span>
          <input name="PR_ms" type="number" inputmode="numeric" />
        </label>
        <label class="field">
          <span>QRS duration (ms) <em class="hint">60–115</em></span>
          <input name="QRS_ms" type="number" inputmode="numeric" />
        </label>
        <label class="field">
          <span>QT interval (ms) <em class="hint">350–450</em></span>
          <input name="QT_ms" type="number" inputmode="numeric" />
        </label>
        <label class="field">
          <span>RR interval (ms) <em class="hint">600–1200</em></span>
          <input name="RR_ms" type="number" inputmode="numeric" />
        </label>

        <fieldset class="field field--row">
          <legend>QTc method</legend>
          <label><input type="radio" name="qtc_method" value="bazett" checked /> Bazett</label>
          <label><input type="radio" name="qtc_method" value="fridericia" /> Fridericia</label>
        </fieldset>

        <div class="grid-row-end">
          <button id="guardrail-submit" class="btn btn--primary" type="submit">Evaluate encounter</button>
        </div>
      </form>

      <p id="guardrail-error" class="error hide"></p>

      <!-- GuardRail Result -->
      <div id="guardrail-result" class="result"></div>
      <!-- GuardRail recommendations (filled by JS) -->
      <div id="guardrail-recs" class="recs"></div>
    </section>

    <!-- TrendView -->
    <section class="card">
      <h2>TrendView — Serial QTc monitoring</h2>

      <form id="trend-form" class="grid grid--two">
        <label class="field">
          <span>Age band</span>
          <select id="trend-age-band">
            <option>Adult 65+</option>
            <option>Adult 18–64</option>
            <option>Child 10–12 yrs</option>
          </select>
        </label>
        <label class="field">
          <span>Sex</span>
          <select id="trend-sex">
            <option value="male">Male</option>
            <option value="female">Female</option>
          </select>
        </label>

        <div class="history">
          <h4>Historical QT and RR readings</h4>
          <table class="table">
            <thead><tr><th>Date</th><th>QT (ms)</th><th>RR (ms)</th></tr></thead>
            <tbody id="trend-table-body"></tbody>
          </table>
        </div>

        <label class="field">
          <span>Reading date</span>
          <input id="trend-date" type="text" placeholder="DD/MM/YYYY or YYYY-MM-DD" />
        </label>
        <label class="field">
          <span>New QT (ms)</span>
          <input id="trend-qt" type="number" inputmode="numeric" />
        </label>
        <label class="field">
          <span>RR (ms)</span>
          <input id="trend-rr" type="number" inputmode="numeric" />
        </label>

        <div class="grid-row-end">
          <button id="trend-submit" class="btn btn--primary" type="submit">Evaluate new reading</button>
        </div>
      </form>

      <p id="trend-error" class="error hide"></p>

      <!-- Trend Result -->
      <!-- Band chip & narrative -->
      <div class="trend-meta">
        <span id="trend-band-chip" class="chip chip-muted">—</span>
        <p id="trend-narrative" class="narrative">—</p>
      </div>
      <!-- Export actions -->
      <div class="actions">
        <button id="export-csv" class="btn-secondary" type="button">Export CSV</button>
        <button id="print-report" class="btn-secondary" type="button">Print report</button>
      </div>
      <div id="trend-result" class="result">
          <!-- Chart canvas already present; add overlay tooltip container -->
          <div id="chart-tooltip" class="chart-tooltip" style="display:none;"></div>
      </div>
    </section>
  </main>

  <footer id="backend-warning" class="footer-warn">
    FastAPI backend required at the configured base URL.
  </footer>

  <script src="./app.js"></script></body></html>

